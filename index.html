<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Redja ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
font-family:'Poppins',sans-serif;
overflow:hidden;
color:white;
transition:1s;
background:black;
}

/* Smooth Fade */
.section{
position:absolute;
width:100%;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
transition:all 1s ease;
opacity:1;
}

.hidden{
opacity:0;
pointer-events:none;
transform:scale(1.05);
}

/* LOGIN */
#login{
background:radial-gradient(circle at top,#4b001f,#120005);
}

.glow{
position:absolute;
width:600px;
height:600px;
background:radial-gradient(circle,#ff4b91,transparent 70%);
filter:blur(150px);
opacity:0.4;
animation:pulse 6s infinite alternate;
}

@keyframes pulse{
from{transform:scale(1);}
to{transform:scale(1.3);}
}

.card{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(25px);
padding:70px 60px;
border-radius:30px;
text-align:center;
box-shadow:0 0 80px rgba(255,0,90,0.4);
border:1px solid rgba(255,255,255,0.1);
z-index:2;
}

.card h1{
font-family:'Playfair Display',serif;
font-size:34px;
margin-bottom:10px;
background:linear-gradient(45deg,#ff9a9e,#fad0c4);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.card input{
padding:14px;
width:100%;
border-radius:40px;
border:none;
text-align:center;
margin:25px 0;
background:rgba(255,255,255,0.1);
color:white;
}

.card button{
padding:14px 45px;
border:none;
border-radius:40px;
background:linear-gradient(45deg,#ff4b91,#ff8fab);
color:white;
cursor:pointer;
transition:0.3s;
}

.card button:hover{
transform:scale(1.05);
box-shadow:0 0 20px rgba(255,75,145,0.6);
}

/* STORY */
#story{
background:linear-gradient(180deg,#1a000a,#000);
text-align:center;
padding:20px;
}

.story-container{
max-width:700px;
}

.story-container h1{
font-family:'Playfair Display',serif;
font-size:40px;
margin-bottom:20px;
color:#ff8fab;
}

#text{
line-height:1.9;
font-size:18px;
min-height:120px;
}

.countdown{
margin-top:20px;
font-size:18px;
color:#ff8fab;
}

.story-container button{
margin-top:30px;
padding:14px 45px;
border:none;
border-radius:40px;
background:linear-gradient(45deg,#ff4b91,#ff8fab);
color:white;
cursor:pointer;
font-size:18px;
transition:0.3s;
}

.story-container button:hover{
transform:scale(1.1);
box-shadow:0 0 25px rgba(255,75,145,0.7);
}

/* FOREVER */
#forever{
background:linear-gradient(180deg,#3b0014,#1a0008);
text-align:center;
overflow-y:auto;
padding:50px 20px;
}

#forever h1{
font-size:48px;
color:#ffb6c1;
margin-bottom:20px;
}

.gallery{
display:flex;
justify-content:center;
flex-wrap:wrap;
gap:50px;
margin-top:40px;
}

.polaroid{
background:white;
padding:15px 15px 60px 15px;
width:260px;
box-shadow:0 15px 35px rgba(0,0,0,0.4);
transform:rotate(-3deg);
transition:0.4s ease;
position:relative;
}

.polaroid:nth-child(2){transform:rotate(4deg);}
.polaroid:nth-child(3){transform:rotate(-2deg);}

.polaroid:hover{
transform:rotate(0deg) scale(1.08);
}

.polaroid img{
width:100%;
display:block;
}

.caption{
position:absolute;
bottom:15px;
left:0;
right:0;
text-align:center;
font-family:'Playfair Display',serif;
color:#333;
font-size:14px;
}

/* QUESTION */
.question{
margin-top:50px;
}

.question button{
padding:15px 35px;
margin:15px;
border:none;
border-radius:30px;
font-size:16px;
cursor:pointer;
transition:0.2s;
}

.yes{background:#ff2e93;color:white;}

.no{
background:#444;
color:white;
position:relative;
}

/* YES MESSAGE */
#yesMessage{
display:none;
font-size:45px;
margin-top:30px;
color:#ffb6c1;
animation:pop 0.6s ease;
text-align:center;
}

#yesMessage button{
margin-top:35px;
padding:15px 45px;
border:none;
border-radius:40px;
background:linear-gradient(45deg,#ffffff,#ffe6f0);
color:#ff2e93;
font-size:18px;
cursor:pointer;
box-shadow:0 15px 35px rgba(255,45,143,0.5);
transition:0.3s;
}

#yesMessage button:hover{
transform:scale(1.12);
}

@keyframes pop{
from{transform:scale(0);opacity:0;}
to{transform:scale(1);opacity:1;}
}

/* CONFETTI */
.confetti{
position:fixed;
top:-10px;
font-size:22px;
animation:fall 3s linear forwards;
}

@keyframes fall{
to{transform:translateY(110vh) rotate(360deg);opacity:0;}
}

/* SHAKE */
.shake{
animation:shake 0.25s;
}

@keyframes shake{
0%{transform:translateX(0);}
25%{transform:translateX(-8px);}
50%{transform:translateX(8px);}
75%{transform:translateX(-8px);}
100%{transform:translateX(0);}
}

.back-btn{
position:fixed;
bottom:25px;
left:25px;
padding:12px 28px;
border:none;
border-radius:30px;
background:linear-gradient(45deg,#ff4b91,#ff8fab);
color:white;
cursor:pointer;
box-shadow:0 0 20px rgba(255,0,90,0.6);
z-index:999;
transition:0.3s;
}

.back-btn:hover{transform:scale(1.05);}

.bubble{
  max-width:70%;
  background:#ffdee9;
  padding:12px;
  border-radius:18px;
  margin:15px auto;
  color:#000;
  display:none;
  animation: pop 0.4s ease;
}

@keyframes pop{
  from{transform:scale(0.7);opacity:0;}
  to{transform:scale(1);opacity:1;}
}

</style>
</head>

<body>

<div id="chatBubble" class="bubble"></div>

<div id="login" class="section">
<div class="glow"></div>
<div class="card">
<h1>Happy Valentine Redja ‚ù§Ô∏è</h1>
<p>Masukkan tanggal spesial kita üíå</p>
<input type="password" id="pass">
<button onclick="login()">Enter</button>
</div>
</div>

<div id="story" class="section hidden">
<div class="story-container">
<h1>Redja ‚ù§Ô∏è</h1>
<p id="text"></p>
<div class="countdown" id="countdown"></div>
<button onclick="showForever()">Continue ‚ú®</button>
</div>
<button class="back-btn" onclick="backToLogin()">Back</button>
</div>

<div id="forever" class="section hidden">
<h1>Forever With You ‚ù§Ô∏è</h1>
<p>Aku memilih kamu hari ini, besok, dan selamanya.</p>

<div class="gallery">
<div class="polaroid"><img src="1.jpeg"><div class="caption">our chaos ü§ç</div></div>
<div class="polaroid"><img src="4.jpeg"><div class="caption">my favorite place</div></div>
<div class="polaroid"><img src="2.jpeg"><div class="caption">always you ‚ù§Ô∏è</div></div>
</div>

<div class="question">
<h2>Will you stay with me forever? üíç</h2>
<button class="yes" onclick="sayYes()">Yes ‚ù§Ô∏è</button>
<button class="no" id="noBtn">No üòù</button>
</div>

<div id="yesMessage">
She said YES! üíñ<br>
<button onclick="showHeart()">One Last Thing ‚ù§Ô∏è</button>
</div>

<button class="back-btn" onclick="backToStory()">Back</button>
</div>

<div id="heart" class="section hidden" style="background:black;">
<canvas id="canvas" width="800" height="800"></canvas>
<button class="back-btn" style="right:25px;left:auto;" onclick="goToQuiz()">
  Next üíï
</button>

<button class="back-btn" onclick="backToForever()">Back ‚ù§Ô∏è</button>
</div>

<div id="quiz" class="section hidden" style="background:linear-gradient(180deg,#120005,#000); text-align:center; padding:40px 20px;">
  <h1 style="color:#ff8fab;font-size:42px;">How Much Do You Love Me? üíñ</h1>

  <!-- RATING -->
  <p style="margin-top:25px;font-size:20px;">Seberapa sayang kamu sama aku?</p>
  <div id="rating" style="font-size:40px; margin:20px 0;">
    <span onclick="rate(1)">ü§ç</span>
    <span onclick="rate(2)">ü§ç</span>
    <span onclick="rate(3)">ü§ç</span>
    <span onclick="rate(4)">ü§ç</span>
    <span onclick="rate(5)">ü§ç</span>
  </div>
  <p id="rateText" style="font-size:18px;color:#ffb6c1;"></p>

  <!-- QUIZ -->
  <div style="margin-top:35px;max-width:500px;">
    <p>üìÖ Tanggal lahir aku?</p>
    <input id="q1" placeholder="contoh: 01 januari 2001">

    <p style="margin-top:20px;"> Alat musik favorit aku?</p>
    <input id="q2" placeholder="-">

    <p style="margin-top:20px;">üç∞ Aku lebih suka?</p>
    <input id="q3" placeholder="manis / asin / pedas / asam">
  </div>

  <button onclick="submitQuiz()" style="
    margin-top:30px;
    padding:14px 45px;
    border:none;
    border-radius:40px;
    background:linear-gradient(45deg,#ff4b91,#ff8fab);
    color:white;
    font-size:18px;
    cursor:pointer;
  ">
    Submit ‚ù§Ô∏è
  </button>

  <p id="result" style="margin-top:25px;font-size:22px;color:#ffb6c1;"></p>

  <button class="back-btn" onclick="backToHeart()">Back</button>
</div>


<audio id="bgm" loop>
<source src="from the start.mpeg" type="audio/mpeg">
</audio>

<audio id="popSound">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3">
</audio>

<script>
    
    document.addEventListener("DOMContentLoaded", () => {
  resetLogIfNewDay();
});


    function resetLogIfNewDay(){
  const today = new Date().toDateString();
  const lastDay = localStorage.getItem("last_day");

  if(lastDay !== today){
    localStorage.removeItem("love_log");
    localStorage.setItem("last_day", today);
  }
}

/* ===== NORMALIZE TYPO ===== */
function normalize(text){
  return text
    .toLowerCase()
    .replace(/\s+/g,'')
    .replace(/[^a-z0-9]/g,'');
}

/* ===== RANDOM SONG ===== */
const loveSongs = [
  "https://open.spotify.com/track/2iUXsYOEPhVqEBwsqP70rE",
  "https://open.spotify.com/track/1o6LQ6J9G1WQJY1Zf5yXvF",
  "https://open.spotify.com/track/6GGtHZgBycCgGBUhZo81xe"
];

function randomSong(){
  return loveSongs[Math.floor(Math.random()*loveSongs.length)];
}

/* ===== RANDOM PHOTO ===== */
const memoryPhotos = [
  "https://i.imgur.com/foto5.jpeg",
  "https://i.imgur.com/foto6.jpeg",
  "https://i.imgur.com/foto7.jpeg"
];

function randomPhoto(){
  return memoryPhotos[Math.floor(Math.random()*memoryPhotos.length)];
}

function showBubble(text){
  const bubble = document.getElementById("chatBubble");
  bubble.innerText = text;
  bubble.style.display = "block";
}


const bgm=document.getElementById("bgm");

document.addEventListener("click",()=>{if(bgm.paused) bgm.play();},{once:true});

const loginDiv=document.getElementById("login");
const story=document.getElementById("story");
const forever=document.getElementById("forever");
const heart=document.getElementById("heart");

function login(){
if(pass.value==="221222"){
loginDiv.classList.add("hidden");
setTimeout(()=>story.classList.remove("hidden"),800);
startTyping(); startCountdown();
}else alert("Itu bukan tanggal kita ‚ù§Ô∏è");
}

function showForever(){story.classList.add("hidden");setTimeout(()=>forever.classList.remove("hidden"),800);}
function backToLogin(){story.classList.add("hidden");setTimeout(()=>loginDiv.classList.remove("hidden"),800);}
function backToStory(){forever.classList.add("hidden");setTimeout(()=>story.classList.remove("hidden"),800);}
function backToForever(){heart.classList.add("hidden");setTimeout(()=>forever.classList.remove("hidden"),800);}

let msg="Kamu bukan hanya seseorang yang aku sayang. Kamu adalah rumah, tempat aku pulang, dan alasan aku percaya bahwa cinta itu nyata.";
let i=0;
function startTyping(){
text.innerHTML="";i=0;
(function type(){if(i<msg.length){text.innerHTML+=msg[i++];setTimeout(type,40);}})();
}

function startCountdown(){
let start=new Date("2022-12-22");
setInterval(()=>{
let days=Math.floor((new Date()-start)/(1000*60*60*24));
countdown.innerText="Sudah bersama "+days+" hari ‚ù§Ô∏è";
},1000);
}

function sayYes(){
yesMessage.style.display="block";
popSound.play();
confettiBurst();
}

/* NO BUTTON BRUTAL */
const noBtn=document.getElementById("noBtn");
function moveNoBtn(){
noBtn.style.position="absolute";
noBtn.style.top=Math.random()*80+"%";
noBtn.style.left=Math.random()*80+"%";
}
noBtn.addEventListener("mouseover",moveNoBtn);
noBtn.addEventListener("touchstart",moveNoBtn); // buat HP/tablet juga
noBtn.addEventListener("click",moveNoBtn); // kalau nekat klik
;

function confettiBurst(){
for(let i=0;i<80;i++){
let c=document.createElement("div");
c.className="confetti";
c.innerHTML=["üíñ","‚ú®","‚ù§Ô∏è","üíò"][Math.floor(Math.random()*4)];
c.style.left=Math.random()*100+"vw";
document.body.appendChild(c);
setTimeout(()=>c.remove(),3000);
}
}

let heartStarted=false;
function showHeart(){
forever.classList.add("hidden");
setTimeout(()=>{heart.classList.remove("hidden");if(!heartStarted) drawHeart();},800);
}

function drawHeart(){
heartStarted=true;
const c=document.getElementById("canvas");
const ctx=c.getContext("2d");
ctx.translate(c.width/2,c.height/2);
ctx.strokeStyle="#ff5fa2";ctx.lineWidth=2;
let i=0;ctx.beginPath();
function x(t){return 16*Math.pow(Math.sin(t),3);}
function y(t){return 13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);}
(function d(){
let t=i/50;
let px=x(t)*20,py=-y(t)*20;
i?ctx.lineTo(px,py):ctx.moveTo(px,py);
ctx.stroke(); i++;
if(i<6000) requestAnimationFrame(d);
})();
}
/* ===== QUIZ & RATING ===== */
let loveRate = 0;

function rate(n){
  loveRate = n;
  const hearts = document.querySelectorAll("#rating span");
  hearts.forEach((h,i)=>{
    h.textContent = i < n ? "‚ù§Ô∏è" : "ü§ç";
  });

  const texts=[
    "",
    "Hmm‚Ä¶ masa segini doang üò¢",
    "Lumayan, tapi aku pengen lebih üíï",
    "Aku senyum baca ini üòä",
    "Aku ngerasa disayang ü•∞",
    "Ini cinta sejati üíç‚ù§Ô∏è"
  ];
  document.getElementById("rateText").innerText = texts[n];
}

function submitQuiz(){
  let score = 0;

  if(q1.value.toLowerCase().includes("08") && q1.value.toLowerCase().includes("april")) score++;
  if(q2.value.toLowerCase().includes("gitar")) score++;
  if(q3.value.toLowerCase().includes("manis")) score++;

  saveLog(score); // üëà JEJAK LOG (AMAN)

  let msg = "";

  // ===== KONDISI SKOR TINGGI =====
  if(score === 3 && loveRate >= 4){
    msg = "üíñ Kamu benar-benar mengenal dan mencintai aku.\nAku ngerasa jadi orang paling beruntung.";

    result.innerText = msg + "\n\nüíå Menghubungkan ke WhatsApp...";

    setTimeout(()=>{
      sendWhatsApp();
    }, 2000);

  }else if(score >= 2){
    msg = "ü•∞ Kamu sayang aku, dan itu terasa nyata.";
    result.innerText = msg;

  }else{
    msg = "üòù Kamu harus lebih kenal aku lagi ya~";
    result.innerText = msg;
  }
}

function sendWhatsApp(){
  const phone = "6282235802348"; 
  // GANTI dengan nomor WhatsApp kamu (62 tanpa +)

  const text = encodeURIComponent(
    "Aku dapet skor tertinggi di web kamu ‚ù§Ô∏è\n" +
    "Aku jawab semua kuis dengan benar üò≥\n\n" +
    "Aku sayang kamu lebih dari yang bisa aku jelasin üíñ"
  );

  window.location.href = `https://wa.me/${phone}?text=${text}`;
}


function goToQuiz(){
  heart.classList.add("hidden");
  setTimeout(()=>quiz.classList.remove("hidden"),800);
}

function backToHeart(){
  quiz.classList.add("hidden");
  setTimeout(()=>heart.classList.remove("hidden"),800);
}

/* ===== JEJAK LOG (AMAN) ===== */
function saveLog(score){
  let logs = localStorage.getItem("love_log");

  if(!logs){
    logs = [];
  }else{
    logs = JSON.parse(logs);
  }

  logs.push({
    score: score,
    waktu: new Date().toLocaleString()
  });

  localStorage.setItem("love_log", JSON.stringify(logs));
}

</script>

</body>
</html>
